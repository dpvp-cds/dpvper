<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados Preliminares DPvPer - Caminos del Ser</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #F8F7F2; color: #6B6661; }
        h1, h2, h3, h4 { font-family: 'Playfair Display', serif; color: #070404; }
        .btn-brand { background-color: #E8A613; color: white; padding: 12px 30px; border-radius: 9999px; font-weight: 600; transition: all 0.3s ease; }
        .btn-brand:hover { background-color: #d4940f; transform: translateY(-2px); }
        .card { background-color: white; border-radius: 16px; padding: 2rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .blurry-card {
            position: relative;
            overflow: hidden;
            border: 2px dashed #d1d5db;
        }
        .blurry-card .content {
            filter: blur(8px);
            opacity: 0.5;
            user-select: none;
        }
        .blurry-card .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(2px);
        }
    </style>
</head>
<body class="leading-relaxed">

    <header class="bg-white py-4 shadow-sm">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <a href="index.html">
                <img src="logoprincipal.png" alt="Logo DPvPer" class="h-12">
            </a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="https://caminosdelser.co" class="text-gray-600 hover:text-[#E8A613]">Inicio</a>
                <a href="BaseTeorica_PI.pdf" target="_blank" class="text-gray-600 hover:text-[#E8A613]">Base Te√≥rica</a>
                <a href="https://wa.me/573233796547" target="_blank" class="text-gray-600 hover:text-[#E8A613]">Contacto</a>
            </div>
        </div>
    </header>

    <main id="main-content" class="container mx-auto px-6 py-12">
        <div id="vistaPublica">
            <div class="text-center py-20">
                <h1 class="text-3xl">Cargando tus resultados...</h1>
            </div>
        </div>
    </main>

    <footer class="bg-[#070404] text-white py-12">
        <div class="container mx-auto text-center px-6">
            <p class="text-gray-400">&copy; 2025 Jorge Arango Casta√±o - DPvPer.</p>
            <a href="terapeuta-login.html" class="text-sm text-gray-400 hover:text-white transition-colors mt-2 inline-block">Acceso Terapeutas</a>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sessionData = sessionStorage.getItem('dpvperResultados');
            const mainContent = document.getElementById('main-content');

            if (!sessionData) {
                mainContent.innerHTML = '<div class="text-center py-20"><h1 class="text-3xl text-red-600">No se encontraron resultados.</h1><p class="mt-4">Por favor, completa primero el cuestionario.</p><a href="index.html" class="btn-brand mt-6 inline-block">Ir al Cuestionario</a></div>';
                return;
            }

            try {
                const datosCompletos = JSON.parse(sessionData);
                procesarResultados(datosCompletos);
            } catch (e) {
                console.error("Error al procesar los datos:", e);
                mainContent.innerHTML = '<h1 class="text-3xl text-center text-red-600">Hubo un error al procesar tus resultados.</h1>';
            }
        });

        function procesarResultados(datosCompletos) {
            const respuestas = datosCompletos.respuestas;
            const demograficos = datosCompletos.demograficos;

            const arquetiposInfo = {
                a: { nombre: 'Analista / Sabio', descripcion: 'Tu motor es el conocimiento, la l√≥gica y la b√∫squeda de la verdad. Encuentras sentido al entender el mundo, organizar sistemas y resolver problemas complejos.' },
                b: { nombre: 'Creador / Innovador', descripcion: 'Tu energ√≠a proviene de la imaginaci√≥n, la originalidad y la necesidad de dar forma a lo nuevo. Te sientes m√°s vivo/a cuando creas, inventas o expresas una visi√≥n √∫nica.' },
                c: { nombre: 'Conector / Humanista', descripcion: 'Encuentras tu prop√≥sito en la red de relaciones humanas. Tu fuerza radica en la empat√≠a, en construir puentes entre personas y en fomentar la comunidad.' },
                d: { nombre: 'Explorador', descripcion: 'Te impulsa un profundo anhelo de libertad, autonom√≠a y nuevas experiencias. Tu prop√≥sito no es un destino, sino el viaje mismo: aprender y descubrir.' },
                e: { nombre: 'Constructor / Contribuidor', descripcion: 'Tu motivaci√≥n es el impacto tangible y el servicio a una causa m√°s grande que t√∫. Eres una persona de acci√≥n que encuentra sentido al edificar y aportar de forma pr√°ctica.' },
                f: { nombre: 'Sanador / Espiritual', descripcion: 'Tu energ√≠a se dirige hacia el mundo interior. Buscas la armon√≠a, el equilibrio y la paz, tanto para ti como para los dem√°s. Tu prop√≥sito se manifiesta al guiar a otros al bienestar.' }
            };

            const scores = { a: 0, b: 0, c: 0, d: 0, e: 0, f: 0 };
            for (const pregunta in respuestas) {
                const arquetipoVotado = respuestas[pregunta];
                if (arquetipoVotado !== 'na') {
                    scores[arquetipoVotado]++;
                }
            }

            const sortedScores = Object.entries(scores).sort(([,a],[,b]) => b-a);
            
            const arquetipoPrimario = sortedScores[0];
            const arquetipoSecundario = sortedScores[1];
            const arquetipoTerciario = sortedScores[2];

            mostrarVistaPublica(demograficos, scores, arquetipoPrimario, arquetipoSecundario, arquetipoTerciario, arquetiposInfo);
        }

        function mostrarVistaPublica(demograficos, scores, primario, secundario, terciario, info) {
            const vistaPublicaDiv = document.getElementById('vistaPublica');
            
            const nombreSecundario = info[secundario[0]].nombre;
            const descSecundario = info[secundario[0]].descripcion;

            let html = `
                <div class="text-center">
                    <h1 class="text-4xl md:text-5xl">Hola, ${demograficos.nombre.split(' ')[0]}</h1>
                    <p class="text-lg mt-2">Este es un avance de tu Diagn√≥stico DPvPer.</p>
                </div>

                <div class="card mt-10">
                    <h2 class="text-3xl text-center mb-8">Un Vistazo a tu Mundo Interior</h2>
                    <p class="text-center max-w-3xl mx-auto mb-10">Tus respuestas revelan un perfil √∫nico de motivaciones. Hemos identificado tus tres arquetipos principales. Como avance, te revelamos tu **arquetipo secundario**, la energ√≠a que colorea y da contexto a tu fuerza principal.</p>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-center">
                        <!-- PRIMARIO BORROSO -->
                        <div class="blurry-card text-center p-6 h-full">
                            <div class="content">
                                <h3 class="text-xl font-bold">Tu Arquetipo Primario</h3>
                                <p class="text-4xl my-4">‚ùì</p>
                                <p>Esta es tu fuerza dominante, el motor principal de tu ser. Define tu "qu√©" m√°s fundamental en la vida.</p>
                            </div>
                            <div class="overlay">
                               <span class="text-center font-bold text-lg bg-gray-200 px-4 py-2 rounded-full shadow">üîí Revelado en Reporte Completo</span>
                            </div>
                        </div>

                        <!-- SECUNDARIO VISIBLE -->
                        <div class="text-center p-6 border-4 border-[#E8A613] rounded-lg transform lg:scale-110 shadow-2xl z-10 bg-white h-full flex flex-col justify-center">
                             <h3 class="text-xl font-bold text-gray-500">Tu Arquetipo Secundario</h3>
                             <h4 class="text-3xl text-[#070404] mt-2">${nombreSecundario}</h4>
                             <p class="mt-4">${descSecundario}</p>
                        </div>

                        <!-- TERCIARIO BORROSO -->
                        <div class="blurry-card text-center p-6 h-full">
                            <div class="content">
                                <h3 class="text-xl font-bold">Tu Arquetipo Terciario</h3>
                                <p class="text-4xl my-4">‚ùì</p>
                                <p>Esta es tu energ√≠a de apoyo. Representa el "para qu√©" de tus acciones y nutre a tus otras dos fuerzas.</p>
                            </div>
                             <div class="overlay">
                               <span class="text-center font-bold text-lg bg-gray-200 px-4 py-2 rounded-full shadow">üîí Revelado en Reporte Completo</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-10">
                     <h2 class="text-3xl text-center mb-2">Tu Perfil de Motivaciones</h2>
                     <p class="text-center max-w-3xl mx-auto mb-8">La gr√°fica muestra la intensidad de todas tus energ√≠as arquet√≠picas. Hemos resaltado tu arquetipo secundario para que veas su relaci√≥n con las dem√°s fuerzas que te definen.</p>
                     <div class="chart-container" style="height: 350px; max-height: 400px;">
                        <canvas id="radarChart"></canvas>
                    </div>
                </div>

                <div class="card mt-10 text-center bg-[#070404] text-white">
                    <h2 class="text-3xl text-[#E8A613]">Descubre tu Perfil Completo</h2>
                    <p class="mt-4 max-w-2xl mx-auto">Este avance es solo la punta del iceberg. El reporte completo revela tu arquetipo primario y terciario, analiza la interacci√≥n de todas tus fuerzas, identifica tus bloqueos espec√≠ficos y te entrega una **"F√≥rmula de Prop√≥sito"** personalizada para empezar a construir una vida m√°s alineada.</p>
                    <a href="https://wa.me/573233796547?text=Hola,%20acabo%20de%20realizar%20la%20Escala%20DPvPer%20y%20me%20gustar√≠a%20recibir%20mi%20reporte%20completo." target="_blank" class="btn-brand mt-8 inline-block">Contactar para recibir mi reporte completo</a>
                </div>
            `;

            vistaPublicaDiv.innerHTML = html;

            const archetypeOrder = ['a', 'b', 'c', 'd', 'e', 'f'];
            const secondaryIndex = archetypeOrder.indexOf(secundario[0]);
            
            const pointColors = archetypeOrder.map((_, index) => index === secondaryIndex ? '#E8A613' : 'rgba(107, 114, 128, 0.4)');
            const backgroundColors = archetypeOrder.map((_, index) => index === secondaryIndex ? 'rgba(232, 166, 19, 0.4)' : 'rgba(107, 114, 128, 0.1)');
            const chartLabels = Object.values(info).map((a, index) => index === secondaryIndex ? a.nombre.split(' / ')[0] : '');

            const ctx = document.getElementById('radarChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: chartLabels,
                    datasets: [{
                        label: 'Tu Puntuaci√≥n',
                        data: Object.values(scores),
                        backgroundColor: backgroundColors,
                        borderColor: pointColors,
                        pointBackgroundColor: pointColors,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: pointColors,
                        borderWidth: 2,
                        pointRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                            grid: { color: 'rgba(0, 0, 0, 0.1)' },
                            pointLabels: { 
                                font: { size: 14, weight: 'bold' }, 
                                color: '#070404'
                            },
                            ticks: { display: false, stepSize: 2 },
                            suggestedMin: 0,
                            suggestedMax: Math.max(...Object.values(scores)) + 1
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }
    </script>
</body>
</html>

